{% extends 'base.html' %}
{% block content %}
<div class="container">
    <h1>{{ post['title'] }}</h1>
    <p><strong>Category:</strong> {{ post['blog_category'] }}</p>
    <p><strong>Date:</strong> {{ post['date'] }}</p>
    <p><strong>Body:</strong></p>
    <p>{{ post['body'] }}</p>
    <a href="{{ url_for('blog_posts_page') }}">Back to Blog Posts</a>

    <hr>

    <!-- Like/Dislike Buttons -->
    <div class="d-flex align-items-center">
        <form method="POST" action="{{ url_for('like_post', post_id=post['post_id']) }}" style="margin-right: 10px;">
            <button type="submit" class="btn btn-success">üëç Like ({{ post['likes'] }})</button>
        </form>
        <form method="POST" action="{{ url_for('dislike_post', post_id=post['post_id']) }}">
            <button type="submit" class="btn btn-danger">üëé Dislike ({{ post['dislikes'] }})</button>
        </form>
    </div>

    <hr>

    <!-- Display Comments -->
    <h2>Comments</h2>
    {% if comments %}
        <ul class="list-group">
            {% for comment in comments %}
            <li class="list-group-item">
                <strong>{{ comment['username'] }}</strong>: {{ comment['body'] }}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No comments yet. Be the first to comment!</p>
    {% endif %}

    <hr>

    <!-- Comment Form -->
    <h2>Leave a Comment</h2>
    <form method="POST" action="{{ url_for('blog_post', post_id=post['post_id']) }}">
        <div class="form-group">
            <label for="user_id">Select User:</label>
            <select name="user_id" id="user_id" class="form-control" required>
                <option value="">Select a User</option>
                {% for user in users %}
                <option value="{{ user['user_id'] }}">{{ user['username'] }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="body">Comment:</label>
            <textarea name="body" id="body" class="form-control" rows="3" required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Add Comment</button>
    </form>
</div>
{% endblock %}